# Pipeworks Image Generator Configuration
# Copy this file to .env and adjust values as needed.

# ---------------------------------------------------------------------------
# Server Settings
# ---------------------------------------------------------------------------
# Host and port for the FastAPI / Uvicorn server.
PIPEWORKS_SERVER_HOST=0.0.0.0
PIPEWORKS_SERVER_PORT=7860

# ---------------------------------------------------------------------------
# General Model Settings
# ---------------------------------------------------------------------------
# PyTorch dtype for pipeline loading.  Recommended: bfloat16 for Ampere+
# GPUs, float16 for older GPUs, float32 for CPU-only debugging.
PIPEWORKS_TORCH_DTYPE=bfloat16

# Compute device.  "cuda" for NVIDIA GPUs, "mps" for Apple Silicon, "cpu"
# for CPU-only (slow).
PIPEWORKS_DEVICE=cuda

# ---------------------------------------------------------------------------
# Default Generation Settings
# ---------------------------------------------------------------------------
# These serve as initial values when the user has not overridden them in
# the frontend.
PIPEWORKS_NUM_INFERENCE_STEPS=9
PIPEWORKS_GUIDANCE_SCALE=0.0
PIPEWORKS_DEFAULT_WIDTH=1024
PIPEWORKS_DEFAULT_HEIGHT=1024

# ---------------------------------------------------------------------------
# Performance Optimisations
# ---------------------------------------------------------------------------
# Enable sliced attention (lower VRAM, slightly slower).
PIPEWORKS_ENABLE_ATTENTION_SLICING=false

# Enable sequential CPU offloading (drastically lower VRAM, much slower).
PIPEWORKS_ENABLE_MODEL_CPU_OFFLOAD=false

# Compile the UNet with torch.compile (faster after first call).
PIPEWORKS_COMPILE_MODEL=false

# Attention backend override.  Leave as "default" unless debugging.
PIPEWORKS_ATTENTION_BACKEND=default

# ---------------------------------------------------------------------------
# Paths
# ---------------------------------------------------------------------------
# Model cache directory (can be very large â€” 50 GB+).
PIPEWORKS_MODELS_DIR=models

# Generated image output directory.
PIPEWORKS_OUTPUTS_DIR=outputs
